<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>CUDPP: /home/jwmak/Projects/cudpp/src/cudpp_hash/hash_table.cuh File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CUDPP
   &#160;<span id="projectnumber">2.3</span>
   </div>
   <div id="projectbrief">CUDA Data-Parallel Primitives Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_ad4469cfa01ba522f8c912111b526527.html">cudpp_hash</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">hash_table.cuh File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implements kernel and <b>device</b> functions for a basic hash table.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="definitions_8h.html">definitions.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hash__table_8h.html">hash_table.h</a>&quot;</code><br />
<code>#include &lt;driver_types.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespace_cuda_h_t"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_cuda_h_t.html">CudaHT</a></td></tr>
<tr class="memdesc:namespace_cuda_h_t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encapsulates the hash table library. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2ac570c74ba59d63394d42fecb3942a3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2ac570c74ba59d63394d42fecb3942a3"></a>
__device__ __host__ Entry&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hash__table_8cuh.html#a2ac570c74ba59d63394d42fecb3942a3">CudaHT::CuckooHashing::make_entry</a> (unsigned key, unsigned value)</td></tr>
<tr class="memdesc:a2ac570c74ba59d63394d42fecb3942a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes an 64-bit Entry out of a key-value pair for the hash table. <br /></td></tr>
<tr class="separator:a2ac570c74ba59d63394d42fecb3942a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64b3726faf93c1bc1ce86d65a5b5213a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a64b3726faf93c1bc1ce86d65a5b5213a"></a>
__device__ __host__ unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hash__table_8cuh.html#a64b3726faf93c1bc1ce86d65a5b5213a">CudaHT::CuckooHashing::get_key</a> (Entry entry)</td></tr>
<tr class="memdesc:a64b3726faf93c1bc1ce86d65a5b5213a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the key of an Entry. <br /></td></tr>
<tr class="separator:a64b3726faf93c1bc1ce86d65a5b5213a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b82775ba4481069ebe20b2ba7e5f7e4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0b82775ba4481069ebe20b2ba7e5f7e4"></a>
__device__ __host__ unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hash__table_8cuh.html#a0b82775ba4481069ebe20b2ba7e5f7e4">CudaHT::CuckooHashing::get_value</a> (Entry entry)</td></tr>
<tr class="memdesc:a0b82775ba4481069ebe20b2ba7e5f7e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value of an Entry. <br /></td></tr>
<tr class="separator:a0b82775ba4481069ebe20b2ba7e5f7e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b163f85ecb3e9404662a1e1e64d947e"><td class="memTemplParams" colspan="2">template&lt;unsigned kNumHashFunctions&gt; </td></tr>
<tr class="memitem:a9b163f85ecb3e9404662a1e1e64d947e"><td class="memTemplItemLeft" align="right" valign="top">__device__ unsigned&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="hash__table_8cuh.html#a9b163f85ecb3e9404662a1e1e64d947e">CudaHT::CuckooHashing::retrieve</a> (const unsigned query_key, const unsigned table_size, const Entry *table, const Functions&lt; kNumHashFunctions &gt; constants, const uint2 stash_constants, const unsigned stash_count, unsigned *num_probes_required=NULL)</td></tr>
<tr class="memdesc:a9b163f85ecb3e9404662a1e1e64d947e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Answers a single query.  <a href="hash__table_8cuh.html#a9b163f85ecb3e9404662a1e1e64d947e">More...</a><br /></td></tr>
<tr class="separator:a9b163f85ecb3e9404662a1e1e64d947e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a784ccbae93ab9dd3d5a1d935c7a2fa15"><td class="memTemplParams" colspan="2"><a class="anchor" id="a784ccbae93ab9dd3d5a1d935c7a2fa15"></a>
template&lt;unsigned kNumHashFunctions&gt; </td></tr>
<tr class="memitem:a784ccbae93ab9dd3d5a1d935c7a2fa15"><td class="memTemplItemLeft" align="right" valign="top">__global__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="hash__table_8cuh.html#a784ccbae93ab9dd3d5a1d935c7a2fa15">CudaHT::CuckooHashing::hash_retrieve</a> (const unsigned n_queries, const unsigned *keys_in, const unsigned table_size, const Entry *table, const Functions&lt; kNumHashFunctions &gt; constants, const uint2 stash_constants, const unsigned stash_count, unsigned *values_out, unsigned *num_probes_required=NULL)</td></tr>
<tr class="memdesc:a784ccbae93ab9dd3d5a1d935c7a2fa15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a retrieval from a basic hash table. Each thread manages a single query. <br /></td></tr>
<tr class="separator:a784ccbae93ab9dd3d5a1d935c7a2fa15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Internal</div></td></tr>
<tr class="memitem:aef6fe37068ee37d785ad7ac40a302668"><td class="memTemplParams" colspan="2"><a class="anchor" id="aef6fe37068ee37d785ad7ac40a302668"></a>
template&lt;class T &gt; </td></tr>
<tr class="memitem:aef6fe37068ee37d785ad7ac40a302668"><td class="memTemplItemLeft" align="right" valign="top">__global__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="hash__table_8cuh.html#aef6fe37068ee37d785ad7ac40a302668">CudaHT::CuckooHashing::clear_table</a> (const unsigned table_size, const T value, T *table)</td></tr>
<tr class="memdesc:aef6fe37068ee37d785ad7ac40a302668"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fills the entire array with a specific value. <br /></td></tr>
<tr class="separator:aef6fe37068ee37d785ad7ac40a302668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47b6098e6046168aa167ace8ca68a25e"><td class="memTemplParams" colspan="2"><a class="anchor" id="a47b6098e6046168aa167ace8ca68a25e"></a>
template&lt;unsigned kNumHashFunctions&gt; </td></tr>
<tr class="memitem:a47b6098e6046168aa167ace8ca68a25e"><td class="memTemplItemLeft" align="right" valign="top">__device__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="hash__table_8cuh.html#a47b6098e6046168aa167ace8ca68a25e">CudaHT::CuckooHashing::KeyLocations</a> (const Functions&lt; kNumHashFunctions &gt; constants, const unsigned table_size, const unsigned key, unsigned locations[kNumHashFunctions])</td></tr>
<tr class="memdesc:a47b6098e6046168aa167ace8ca68a25e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine where in the hash table the key could be located. <br /></td></tr>
<tr class="separator:a47b6098e6046168aa167ace8ca68a25e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28550cb64e436b35626a10610a0b8387"><td class="memTemplParams" colspan="2"><a class="anchor" id="a28550cb64e436b35626a10610a0b8387"></a>
template&lt;unsigned kNumHashFunctions&gt; </td></tr>
<tr class="memitem:a28550cb64e436b35626a10610a0b8387"><td class="memTemplItemLeft" align="right" valign="top">__device__ unsigned&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="hash__table_8cuh.html#a28550cb64e436b35626a10610a0b8387">CudaHT::CuckooHashing::determine_next_location</a> (const Functions&lt; kNumHashFunctions &gt; constants, const unsigned table_size, const unsigned key, const unsigned previous_location)</td></tr>
<tr class="memdesc:a28550cb64e436b35626a10610a0b8387"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine where to insert the key next. The hash functions are used in round-robin order. <br /></td></tr>
<tr class="separator:a28550cb64e436b35626a10610a0b8387"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b7189bdd7fca81e3187ef0a94f78d13"><td class="memTemplParams" colspan="2">template&lt;unsigned kNumHashFunctions&gt; </td></tr>
<tr class="memitem:a6b7189bdd7fca81e3187ef0a94f78d13"><td class="memTemplItemLeft" align="right" valign="top">__device__ bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="hash__table_8cuh.html#a6b7189bdd7fca81e3187ef0a94f78d13">CudaHT::CuckooHashing::insert</a> (const unsigned table_size, const Functions&lt; kNumHashFunctions &gt; constants, const uint2 stash_constants, const unsigned max_iteration_attempts, Entry *table, unsigned *stash_count, Entry entry, unsigned *iterations_used)</td></tr>
<tr class="memdesc:a6b7189bdd7fca81e3187ef0a94f78d13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to insert a single entry into the hash table.  <a href="hash__table_8cuh.html#a6b7189bdd7fca81e3187ef0a94f78d13">More...</a><br /></td></tr>
<tr class="separator:a6b7189bdd7fca81e3187ef0a94f78d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7e64aae63b6f218e0ef7581d5c9423d"><td class="memTemplParams" colspan="2"><a class="anchor" id="ab7e64aae63b6f218e0ef7581d5c9423d"></a>
template&lt;unsigned kNumHashFunctions&gt; </td></tr>
<tr class="memitem:ab7e64aae63b6f218e0ef7581d5c9423d"><td class="memTemplItemLeft" align="right" valign="top">__global__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><b>CudaHT::CuckooHashing::CuckooHash</b> (const unsigned n_entries, const unsigned *keys, const unsigned *values, const unsigned table_size, const Functions&lt; kNumHashFunctions &gt; constants, const unsigned max_iteration_attempts, Entry *table, uint2 stash_constants, unsigned *stash_count, unsigned *failures, unsigned *iterations_taken)</td></tr>
<tr class="separator:ab7e64aae63b6f218e0ef7581d5c9423d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements kernel and <b>device</b> functions for a basic hash table. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="file_a9b163f85ecb3e9404662a1e1e64d947e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;unsigned kNumHashFunctions&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__device__ unsigned CudaHT::CuckooHashing::retrieve </td>
          <td>(</td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>query_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>table_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cudpp__hash__data__structures.html#gafe2f05af1878791275ea26b37c528104">Entry</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_cuda_h_t_1_1_cuckoo_hashing_1_1_functions.html">Functions</a>&lt; kNumHashFunctions &gt;&#160;</td>
          <td class="paramname"><em>constants</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint2&#160;</td>
          <td class="paramname"><em>stash_constants</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>stash_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>num_probes_required</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Answers a single query. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Query key </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">table_size</td><td>Size of the hash table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>The contents of the hash table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">constants</td><td>The hash functions used to build the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stash_constants</td><td>The hash function used to build the stash </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stash_count</td><td>The number of items in the stash </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">num_probes_required</td><td>Debug only: The number of probes required to resolve the query. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The value of the query key, if the key exists in the table. Otherwise, kNotFound will be returned. </dd></dl>

</div>
</div>
<a class="anchor" id="file_a6b7189bdd7fca81e3187ef0a94f78d13"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;unsigned kNumHashFunctions&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__device__ bool CudaHT::CuckooHashing::insert </td>
          <td>(</td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>table_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_cuda_h_t_1_1_cuckoo_hashing_1_1_functions.html">Functions</a>&lt; kNumHashFunctions &gt;&#160;</td>
          <td class="paramname"><em>constants</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint2&#160;</td>
          <td class="paramname"><em>stash_constants</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>max_iteration_attempts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cudpp__hash__data__structures.html#gafe2f05af1878791275ea26b37c528104">Entry</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>stash_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cudpp__hash__data__structures.html#gafe2f05af1878791275ea26b37c528104">Entry</a>&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>iterations_used</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempts to insert a single entry into the hash table. </p>
<p>This process stops after a certain number of iterations. If the thread is still holding onto an item because of an eviction, it tries the stash. If it fails to enter the stash, it returns false. Otherwise, it succeeds and returns true. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Nov 30 2016 15:29:12 for CUDPP by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
